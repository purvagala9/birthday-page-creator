<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Birthday Wish Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Create a personalized birthday page with your message and image, then download it as a shareable HTML file." />
  <style>
    :root{
      --gap:20px;
      --card-bg:#ffffff;
      --shadow:0 3px 8px rgba(0,0,0,.2);
      --radius:12px;
      --brand:#6a5acd;
      --brand-2:#ff69b4;
    }
    *{box-sizing:border-box}
    body{
      font-family: system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji";
      background: linear-gradient(145deg, #e6f4ff 0%, #d7e9ff 35%, #ffe6f3 100%);
      min-height:100svh;
      margin:0;
      color:#1f2937;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding:24px;
    }
    .wrap{
      width:min(1400px,100%);
      display: grid;
      /* Made left column smaller (30%) and right column larger (70%) */
      grid-template-columns: 30% 70%;
      gap: var(--gap);
    }
    .left-panel {
      display: flex;
      flex-direction: column;
      gap: var(--gap);
    }
    .right-panel {
      position: sticky;
      top: 24px;
      height: fit-content;
    }
    header{
      text-align:center;
      margin-bottom:18px;
      grid-column: 1 / -1;
    }
    header h1{
      margin:0 0 6px;
      font-size:clamp(1.3rem, 2.2vw, 2rem);
    }
    header p{
      margin:0;
      opacity:.8;
    }
    form{
      display:flex;
      flex-direction: column;
      gap:var(--gap);
    }
    .card{
      background:var(--card-bg);
      padding:16px;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      border:1px solid rgba(0,0,0,.06);
    }
    .card h2, .card h3{ margin-top:2px }
    label{
      font-weight:600;
      display:block;
      margin-top:10px;
    }
    input[type="text"],
    input[type="file"],
    input[type="color"],
    select,
    textarea{
      width:100%;
      margin-top:8px;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid #d1d5db;
      outline:none;
      transition:.2s border-color, .2s box-shadow;
      font:inherit;
      background:#fff;
    }
    textarea{ resize:vertical; min-height:96px }
    input[type="text"]:focus,
    textarea:focus, select:focus{
      border-color:#93c5fd;
      box-shadow:0 0 0 4px rgba(59,130,246,.15);
    }
    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:12px;
    }
    .helper{
      font-size:.92rem;
      color:#6b7280;
      margin:6px 0 0;
    }
    .actions{
      display:flex;
      flex-wrap:wrap;
      gap:12px;
      justify-content:center;
      margin-top:6px;
    }
    button{
      appearance:none;
      border:none;
      cursor:pointer;
      padding:12px 18px;
      border-radius:999px;
      font-weight:700;
      box-shadow:var(--shadow);
      transition:transform .06s ease, box-shadow .2s ease;
    }
    .primary{
      background: linear-gradient(135deg, var(--brand), var(--brand-2));
      color:#fff;
    }
    .secondary{
      background:#ffffff;
      border:1px solid #e5e7eb;
    }
    button:active{ transform: translateY(1px) }
    .preview{
      background:#fff;
      border-radius:16px;
      padding:12px;
      border:1px dashed #aaa;
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:10px;
      text-align:center;
      overflow:auto;
    }
    .preview small{ color:#64748b }
    .sr-only{
      position:absolute!important; height:1px;width:1px;overflow:hidden; clip:rect(1px,1px,1px,1px); white-space:nowrap;
    }
    iframe {
      width:100%;
      /* Increased preview height for better visibility */
      height:700px;
      border:none;
      border-radius:var(--radius);
      background:#f9f9f9;
    }
    .music-controls {
      margin-top: 10px;
      text-align: center;
    }
    .music-controls audio {
      width: 100%;
      max-width: 300px;
    }
    /* Responsive */
    @media (max-width: 880px){
      .wrap{ 
        grid-template-columns:1fr;
        gap: var(--gap);
      }
      .right-panel {
        position: static;
      }
      header {
        grid-column: 1;
      }
      .row{ grid-template-columns: 1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>üéÇ Create a Birthday Page with Image</h1>
      <p>Fill in the details below. We'll generate a single, shareable HTML file and download it instantly.</p>
    </header>

    <div class="left-panel">
      <form id="wishForm" novalidate>
        <section class="card">
          <h2>Core Details</h2>

          <label for="favcolor">Select background color</label>
          <input class="colour" type="color" id="favcolor" value="#ff69b4" aria-describedby="bgHelp" />
          <div id="bgHelp" class="helper">Sets the background for the final birthday page.</div>

          <div class="row">
            <div>
              <label for="toName">Recipient's Name</label>
              <input type="text" id="toName" required />
            </div>
            <div>
              <label for="name">Your Name</label>
              <input type="text" id="name"  required />
            </div>
          </div>

          <label for="heading">Title / Heading</label>
          <input type="text" id="heading" placeholder="Happy Birthday! üéâ" value="Happy Birthday! üéâ" />

          <label for="message">Special Message</label>
          <textarea id="message" rows="4" placeholder="Write a heartfelt wish..." required></textarea>

          <label for="image">Choose a birthday image</label>
          <input type="file" id="image" accept="image/*" required />
          <div class="helper">The image will be embedded inside the HTML so the file works fully offline.</div>

          <!-- Added music upload option -->
          <label for="music">Choose background music (optional)</label>
          <input type="file" id="music" accept="audio/*" />
          <div class="helper">Add a background music file that will play when the birthday page loads.</div>
        </section>

        <section class="card">
          <h2>Styles & Effects</h2>

          <h3>‚ú® Text Preferences</h3>
          <label for="fontsize">Message Font Size</label>
          <select id="fontsize">
            <option value="16px">Small</option>
            <option value="20px" selected>Medium</option>
            <option value="28px">Large</option>
            <option value="36px">Extra Large</option>
          </select>

          <label for="fontstyle">Font Style</label>
          <select id="fontstyle">
            <option value="'Segoe UI', sans-serif">Default</option>
            <option value="cursive">Cursive</option>
            <option value="Georgia, serif">Serif</option>
            <option value="Verdana, sans-serif">Sans Serif</option>
            <option value="monospace">Monospace</option>
          </select>

          <label for="fontcolor">Text Color</label>
          <input type="color" id="fontcolor" value="#ffffff" />

          <h3>üñºÔ∏è Image Preferences</h3>
          <label for="borderradius">Image Border Style</label>
          <select id="borderradius">
            <option value="0px">Square</option>
            <option value="15px">Rounded</option>
            <option value="50%">Circle</option>
          </select>

          <label for="borderwidth">Border Thickness</label>
          <select id="borderwidth">
            <option value="0px">None</option>
            <option value="3px">Thin</option>
            <option value="6px">Medium</option>
            <option value="10px">Thick</option>
          </select>

          <label for="bordercolor">Border Color</label>
          <input type="color" id="bordercolor" value="#ffffff" />

          <label for="bordershadow">Add Shadow</label>
          <select id="bordershadow">
            <option value="none">No</option>
            <option value="0 10px 24px rgba(0,0,0,0.35)">Yes</option>
          </select>

          <h3>üéä Confetti</h3>
          <label for="confettiDuration">Confetti Duration (seconds)</label>
          <select id="confettiDuration">
            <option value="3">3</option>
            <option value="5" selected>5</option>
            <option value="8">8</option>
            <option value="12">12</option>
          </select>
          <label for="confettiDensity">Confetti Density</label>
          <select id="confettiDensity">
            <option value="120">Light</option>
            <option value="220" selected>Medium</option>
            <option value="360">Heavy</option>
            <option value="600">Insane üéÜ</option>
          </select>
        </section>

        <div class="card" aria-live="polite">
          <strong>Heads up:</strong> The generated page will be a <em>single HTML file</em> that includes your image & styles. You can send it on WhatsApp/Email/Drive and it will open as-is. <br />
          <small>No external libraries. Works fully offline.</small>
        </div>

        <div class="actions">
          <button id="generateBtn" class="primary" type="submit">Generate & Download</button>
          <button id="resetBtn" class="secondary" type="button" title="Clear the form">Reset</button>
          <button id="previewBtn" class="secondary" type="button">Update Preview</button>
        </div>
      </form>
    </div>

    <!-- Moved preview to right panel -->
    <div class="right-panel">
      <div class="preview card">
        <h2>üîé Live Preview</h2>
        <iframe id="previewFrame" title="Birthday page preview"></iframe>
        <div class="music-controls">
          <audio id="previewMusic" controls style="display: none;">
            <source id="musicSource" src="" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
        </div>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const $ = (sel) => document.querySelector(sel);
      const form = $("#wishForm");
      const resetBtn = $("#resetBtn");
      const generateBtn = $("#generateBtn");
      const previewBtn = $("#previewBtn"); // Added preview button reference
      const previewFrame = $("#previewFrame");
      const previewMusic = $("#previewMusic");
      const musicSource = $("#musicSource");

      // Accessibility: announce errors
      function announce(msg){
        const live = document.createElement('div');
        live.setAttribute('role','status');
        live.className = 'sr-only';
        live.textContent = msg;
        document.body.appendChild(live);
        setTimeout(()=> live.remove(), 1000);
      }

      // Helper: read file as data URL
      function fileToDataURL(file){
        return new Promise((resolve, reject)=>{
          const reader = new FileReader();
          reader.onload = () => resolve(reader.result);
          reader.onerror = (e) => reject(e);
          reader.readAsDataURL(file);
        });
      }

      // HTML Escaper for text nodes
      function esc(s){
        return String(s)
          .replaceAll("&","&amp;")
          .replaceAll("<","&lt;")
          .replaceAll(">","&gt;")
          .replaceAll('"',"&quot;");
      }

      function buildBirthdayHTML(opts){
        const {
          bgColor, toName, fromName, titleText, messageText, imageDataURL, musicDataURL,
          fontSize, fontFamily, fontColor, radius, borderWidth, borderColor, boxShadow,
          confettiSeconds, confettiCount
        } = opts;

        // Music HTML if provided
        const musicHTML = musicDataURL ? `
          <audio id="bgMusic" autoplay loop style="display: none;">
            <source src="${musicDataURL}" type="audio/mpeg">
            Your browser does not support the audio element.
          </audio>
          <div style="position: fixed; top: 20px; right: 20px; z-index: 10000;">
            <button onclick="toggleMusic()" style="background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.2);">
              üéµ
            </button>
          </div>
          <script>
            let musicPlaying = true;
            function toggleMusic() {
              const music = document.getElementById('bgMusic');
              if (musicPlaying) {
                music.pause();
                musicPlaying = false;
              } else {
                music.play();
                musicPlaying = true;
              }
            }
          <\/script>
        ` : '';

        // Inline minimal confetti engine (vanilla, no CDN)
        const confettiScript = `
<script>
(function(){
  function Confetti(canvas, opts){
    this.c = canvas;
    this.ctx = canvas.getContext('2d');
    this.w = canvas.width = window.innerWidth;
    this.h = canvas.height = window.innerHeight;
    this.particles = [];
    this.opts = Object.assign({
      count: 220,
      gravity: 0.35,
      terminalVelocity: 5,
      drag: 0.075,
      shapes: ['square','circle','triangle'],
      colors: ['#f87171','#fb923c','#facc15','#34d399','#60a5fa','#a78bfa','#f472b6','#2dd4bf']
    }, opts || {});
    for(let i=0;i<this.opts.count;i++){
      this.particles.push(this._spawnParticle());
    }
    window.addEventListener('resize', () => {
      this.w = canvas.width = window.innerWidth;
      this.h = canvas.height = window.innerHeight;
    });
  }
  Confetti.prototype._rand = function(min,max){ return Math.random()*(max-min)+min }
  Confetti.prototype._spawnParticle = function(){
    const angle = this._rand(0, Math.PI*2);
    const spread = this._rand(2, 6);
    return {
      x: this.w/2 + this._rand(-this.w*0.1, this.w*0.1),
      y: -20 + this._rand(-20, 20),
      w: this._rand(6,14),
      h: this._rand(6,14),
      vx: Math.cos(angle)*spread,
      vy: Math.sin(angle)*spread + this._rand(2,4),
      color: this.opts.colors[ (Math.random()*this.opts.colors.length)|0 ],
      shape: this.opts.shapes[ (Math.random()*this.opts.shapes.length)|0 ],
      rotation: this._rand(0, Math.PI*2),
      vr: this._rand(-0.2, 0.2)
    };
  }
  Confetti.prototype._drawParticle = function(p){
    const ctx = this.ctx;
    ctx.save();
    ctx.translate(p.x, p.y);
    ctx.rotate(p.rotation);
    ctx.fillStyle = p.color;
    switch(p.shape){
      case 'square':
        ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
        break;
      case 'circle':
        ctx.beginPath();
        ctx.arc(0,0,Math.max(p.w,p.h)/2,0,Math.PI*2);
        ctx.fill();
        break;
      case 'triangle':
        ctx.beginPath();
        ctx.moveTo(-p.w/2, p.h/2);
        ctx.lineTo(0, -p.h/2);
        ctx.lineTo(p.w/2, p.h/2);
        ctx.closePath();
        ctx.fill();
        break;
    }
    ctx.restore();
  }
  Confetti.prototype.step = function(){
    const ctx = this.ctx;
    ctx.clearRect(0,0,this.w,this.h);
    for(let i=0;i<this.particles.length;i++){
      const p = this.particles[i];
      p.vx *= (1 - this.opts.drag);
      p.vy = Math.min(p.vy + this.opts.gravity, this.opts.terminalVelocity);
      p.x += p.vx;
      p.y += p.vy;
      p.rotation += p.vr;
      this._drawParticle(p);
      if(p.y - 20 > this.h) {
        this.particles[i] = this._spawnParticle();
        this.particles[i].y = -20;
        this.particles[i].x = this._rand(0, this.w);
      }
    }
  }

  document.addEventListener('DOMContentLoaded', function(){
    const canvas = document.getElementById('confetti-canvas');
    const confetti = new Confetti(canvas, { count: ${confettiCount} });
    let running = true;
    function loop(){
      if(!running) return;
      confetti.step();
      requestAnimationFrame(loop);
    }
    loop();
    setTimeout(function(){
      running = false;
      canvas.style.transition = 'opacity .8s ease';
      canvas.style.opacity = '0';
      setTimeout(()=> canvas.remove(), 900);
    }, ${Math.max(1, confettiSeconds) * 1000});
  });
})();
<\/script>`;

        // Build final HTML
        return `<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>${esc(titleText || "Happy Birthday!")}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="A personalized birthday page with wishes and confetti." />
  <style>
    :root{
      --bg:${bgColor};
      --text:${fontColor};
      --ff:${fontFamily};
      --fs:${fontSize};
      --radius:${radius};
      --bwidth:${borderWidth};
      --bcolor:${borderColor};
      --shadow:${boxShadow};
      --panel: rgba(255,255,255,.7);
    }
    *{box-sizing:border-box}
    html,body{ height:100% }
    body{
      margin:0;
      color:var(--text);
      font-family: var(--ff);
      min-height:100%;
      background: radial-gradient(1200px 1200px at 10% 10%, rgba(255,255,255,.25), transparent 60%),
                  radial-gradient(1000px 1000px at 90% 20%, rgba(255,255,255,.2), transparent 60%),
                  var(--bg);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      overflow-x:hidden;
    }
    .container{
      width:min(900px, 100%);
      background: var(--panel);
      backdrop-filter: blur(6px);
      border-radius:24px;
      border:1px solid rgba(255,255,255,.5);
      box-shadow: 0 20px 60px rgba(0,0,0,.25);
      overflow:hidden;
    }
    .header{
      text-align:center;
      padding:24px 16px 8px;
    }
    .header h1{
      margin:0;
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      text-shadow: 0 2px 12px rgba(0,0,0,.18);
    }
    .content{
      display:grid;
      grid-template-columns: 1fr 1.1fr;
      gap:18px;
      padding:16px 16px 24px;
    }
    .imgWrap{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:10px;
    }
    .imgWrap img{
      max-width:100%;
      height:auto;
      border-radius: var(--radius);
      border: var(--bwidth) solid var(--bcolor);
      box-shadow: var(--shadow);
      object-fit:cover;
      aspect-ratio: 1 / 1;
    }
    .text{
      padding:10px;
      color:var(--text);
    }
    .to{ opacity:.9; font-weight:600; margin-top:6px }
    .msg{
      margin:10px 0 14px;
      line-height:1.55;
      font-size: var(--fs);
      white-space: pre-wrap;
    }
    .from{
      opacity:.9;
      font-style:italic;
      text-align:right;
    }
    footer{
      padding:10px 16px 18px;
      text-align:center;
      font-size:.92rem;
      color:rgba(0,0,0,.7);
    }
    .confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:9999;
    }
    @media (max-width: 820px){
      .content{ grid-template-columns: 1fr; }
      .imgWrap img{ aspect-ratio:auto; width:100% }
    }
  </style>
</head>
<body>
  <canvas id="confetti-canvas" class="confetti" aria-hidden="true"></canvas>
  ${musicHTML}

  <main class="container" role="main" aria-label="Birthday Wish">
    <div class="header" role="banner">
      <h1>${esc(titleText || "Happy Birthday! üéâ")}</h1>
      <div class="to">To: ${esc(toName || "My Friend")}</div>
    </div>

    <section class="content">
      <figure class="imgWrap">
        <img alt="Birthday image for ${esc(toName || "friend")}" src="${imageDataURL}" />
      </figure>
      <div class="text">
        <div class="msg">${esc(messageText || "")}</div>
        <div class="from">‚Äî ${esc(fromName || "Someone who cares")} üíñ</div>
      </div>
    </section>

    <footer>
      Made with üíù
    </footer>
  </main>
  ${confettiScript}
</body>
</html>`;
      }

      async function updatePreview() {
        try {
          const opts = {
            bgColor: $("#favcolor").value,
            toName: $("#toName").value || "Friend",
            fromName: $("#name").value || "Someone",
            titleText: $("#heading").value || "Happy Birthday! üéâ",
            messageText: $("#message").value || "Wishing you a wonderful day!",
            fontSize: $("#fontsize").value,
            fontFamily: $("#fontstyle").value,
            fontColor: $("#fontcolor").value,
            radius: $("#borderradius").value,
            borderWidth: $("#borderwidth").value,
            borderColor: $("#bordercolor").value,
            boxShadow: $("#bordershadow").value,
            confettiSeconds: parseInt($("#confettiDuration").value, 10) || 5,
            confettiCount: parseInt($("#confettiDensity").value, 10) || 220,
          };

          const file = $("#image").files[0];
          if (file) {
            opts.imageDataURL = await fileToDataURL(file);
          } else {
            // Show a message instead of generating preview without image
            previewFrame.srcdoc = `
              <html>
                <body style="font-family: system-ui; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #f5f5f5; color: #666; text-align: center;">
                  <div>
                    <h3>üñºÔ∏è Upload an image to see preview</h3>
                    <p>Select a birthday image to see how your page will look</p>
                  </div>
                </body>
              </html>
            `;
            previewMusic.style.display = "none";
            return;
          }

          // Handle music preview
          const musicFile = $("#music").files[0];
          if (musicFile) {
            const musicDataURL = await fileToDataURL(musicFile);
            opts.musicDataURL = musicDataURL;
            musicSource.src = musicDataURL;
            previewMusic.style.display = "block";
            previewMusic.load();
          } else {
            previewMusic.style.display = "none";
          }

          const html = buildBirthdayHTML(opts);
          
          previewFrame.srcdoc = html;
          
        } catch (err) {
          console.error("Preview error:", err);
          previewFrame.srcdoc = `
            <html>
              <body style="font-family: system-ui; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; background: #fee; color: #c33; text-align: center;">
                <div>
                  <h3>‚ö†Ô∏è Preview Error</h3>
                  <p>There was an issue generating the preview</p>
                </div>
              </body>
            </html>
          `;
        }
      }

      // Validate minimal fields are present
      function validate(){
        const toName = $("#toName").value.trim();
        const name = $("#name").value.trim();
        const msg = $("#message").value.trim();
        const file = $("#image").files[0];

        let missing = [];
        if(!toName) missing.push("Recipient's Name");
        if(!name) missing.push("Your Name");
        if(!msg) missing.push("Special Message");
        if(!file) missing.push("Image");
        if(missing.length){
          const text = "Please fill: " + missing.join(", ");
          alert(text);
          announce(text);
          return false;
        }
        return true;
      }

      // Main submit handler: build, blob, download
      form.addEventListener("submit", async (e)=>{
        e.preventDefault();

        if(!validate()) return;

        generateBtn.disabled = true;
        generateBtn.textContent = "Generating‚Ä¶";

        try{
          const opts = {
            bgColor: $("#favcolor").value,
            toName: $("#toName").value,
            fromName: $("#name").value,
            titleText: $("#heading").value || "Happy Birthday! üéâ",
            messageText: $("#message").value,
            fontSize: $("#fontsize").value,
            fontFamily: $("#fontstyle").value,
            fontColor: $("#fontcolor").value,
            radius: $("#borderradius").value,
            borderWidth: $("#borderwidth").value,
            borderColor: $("#bordercolor").value,
            boxShadow: $("#bordershadow").value,
            confettiSeconds: parseInt($("#confettiDuration").value, 10) || 5,
            confettiCount: parseInt($("#confettiDensity").value, 10) || 220,
          };

          // Read image to Data URL so the output file is fully self-contained
          const file = $("#image").files[0];
          const dataURL = await fileToDataURL(file);
          opts.imageDataURL = dataURL;

          const musicFile = $("#music").files[0];
          if (musicFile) {
            const musicDataURL = await fileToDataURL(musicFile);
            opts.musicDataURL = musicDataURL;
          }

          const html = buildBirthdayHTML(opts);
          const blob = new Blob([html], { type: "text/html;charset=utf-8" });

          // Create a temporary link to download
          const a = document.createElement("a");
          const url = URL.createObjectURL(blob);
          a.href = url;

          // Safe filename: include recipient's name if present
          const safeName = (opts.toName || "birthday").replace(/[^\w\-]+/g, "_");
          a.download = `${safeName}_birthday_page.html`;
          document.body.appendChild(a);
          a.click();
          URL.revokeObjectURL(url);
          a.remove();

          announce("Birthday page downloaded.");
        } catch(err){
          console.error(err);
          alert("Oops, something went wrong while generating the page. Check the console for details.");
        } finally{
          generateBtn.disabled = false;
          generateBtn.textContent = "Generate & Download";
        }
      });

      previewBtn.addEventListener("click", updatePreview);

      const formInputs = form.querySelectorAll('input, select, textarea');
      formInputs.forEach(input => {
        input.addEventListener('change', updatePreview);
        if (input.type === 'text' || input.tagName === 'TEXTAREA') {
          input.addEventListener('input', debounce(updatePreview, 500));
        }
      });

      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      // Reset handler
      resetBtn.addEventListener("click", ()=>{
        form.reset();
        $("#favcolor").value = "#ff69b4";
        $("#fontsize").value = "20px";
        $("#fontstyle").value = "'Segoe UI', sans-serif";
        $("#fontcolor").value = "#ffffff";
        $("#borderradius").value = "15px";
        $("#borderwidth").value = "0px";
        $("#bordercolor").value = "#ffffff"; 
        $("#bordershadow").value = "none";
        $("#confettiDuration").value = "5";
        $("#confettiDensity").value = "220";
        previewFrame.src = "";
        previewMusic.style.display = "none";
        announce("Form reset.");
      });

      previewFrame.srcdoc = `
        <html>
          <body style="font-family: system-ui; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; background: linear-gradient(145deg, #e6f4ff 0%, #d7e9ff 35%, #ffe6f3 100%); color: #666; text-align: center;">
            <div>
              <h3>üéÇ Birthday Page Preview</h3>
              <p>Fill in the form to see your birthday page preview</p>
              <small>Upload an image to get started</small>
            </div>
          </body>
        </html>
      `;

      updatePreview();
    })();
  </script>
</body>
</html>
